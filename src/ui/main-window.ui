<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <requires lib="gtk" version="4.18"/>
  <requires lib="libadwaita" version="1.0"/>

  <object class="AdwApplicationWindow" id="main_window">
    <property name="title">Adaptive Layout Example</property>
    <property name="default-width">1000</property>
    <property name="default-height">700</property>
    <property name="width-request">320</property>
    <property name="height-request">400</property>

    <!-- Responsive breakpoints -->
    <child>
      <object class="AdwBreakpoint">
        <property name="condition">max-width: 768sp</property>
        <setter object="split_view" property="collapsed">True</setter>
        <setter object="sidebar_toggle_button" property="visible">False</setter>
      </object>
    </child>
    
    <child>
      <object class="AdwBreakpoint">
        <property name="condition">max-width: 480sp</property>
        <setter object="split_view" property="collapsed">True</setter>
        <setter object="main_header" property="show-title">False</setter>
      </object>
    </child>

    <property name="content">
      <object class="AdwNavigationSplitView" id="split_view">
        <property name="min-sidebar-width">280</property>
        <property name="max-sidebar-width">400</property>
        <property name="sidebar-width-fraction">0.25</property>

        <property name="sidebar">
          <object class="AdwNavigationPage">
            <property name="title" translatable="yes">Navigation</property>
            <property name="tag">sidebar</property>
            <property name="child">
              <object class="AdwToolbarView">
                <property name="top-bar-style">flat</property>
                <child type="top">
                  <object class="AdwHeaderBar" id="sidebar_header">
                    <property name="title-widget">
                      <object class="AdwWindowTitle">
                        <property name="title">Navigation</property>
                        <property name="subtitle">Browse content</property>
                      </object>
                    </property>
                    <style><class name="flat"/></style>
                    <child type="start">
                      <object class="GtkToggleButton" id="sidebar_toggle_button">
                        <property name="icon-name">sidebar-show-symbolic</property>
                        <property name="tooltip-text">Toggle Sidebar</property>
                        <property name="active">true</property>
                        <style>
                          <class name="flat"/>
                        </style>
                      </object>
                    </child>
                    <child type="end">
                      <object class="GtkMenuButton" id="sidebar_menu_button">
                        <property name="icon-name">open-menu-symbolic</property>
                        <property name="tooltip-text">Menu</property>
                        <style>
                          <class name="flat"/>
                        </style>
                      </object>
                    </child>
                  </object>
                </child>
                <property name="content">
                  <object class="GtkScrolledWindow">
                    <property name="hscrollbar-policy">never</property>
                    <property name="vscrollbar-policy">automatic</property>
                    <property name="propagate-natural-height">true</property>
                    <child>
                      <object class="AdwClamp">
                        <property name="maximum-size">400</property>
                        <property name="tightening-threshold">300</property>
                        <child>
                          <object class="GtkBox" id="sidebar_box">
                            <property name="orientation">vertical</property>
                            <property name="spacing">12</property>
                            <property name="margin-start">12</property>
                            <property name="margin-end">12</property>
                            <property name="margin-top">12</property>
                            <property name="margin-bottom">12</property>
                            
                            <!-- Search Section -->
                            <child>
                              <object class="GtkSearchEntry" id="search_entry">
                                <property name="placeholder-text">Search...</property>
                                <property name="hexpand">true</property>
                              </object>
                            </child>
                            
                            <!-- Categories Section -->
                            <child>
                              <object class="AdwPreferencesGroup">
                                <property name="title">Categories</property>
                                <child>
                                  <object class="AdwActionRow" id="category_documents">
                                    <property name="title">Documents</property>
                                    <property name="subtitle">Text files and notes</property>
                                    <property name="activatable">true</property>
                                    <child type="prefix">
                                      <object class="GtkImage">
                                        <property name="icon-name">folder-documents-symbolic</property>
                                      </object>
                                    </child>
                                    <child type="suffix">
                                      <object class="GtkLabel">
                                        <property name="label">12</property>
                                        <style>
                                          <class name="dim-label"/>
                                          <class name="numeric"/>
                                        </style>
                                      </object>
                                    </child>
                                  </object>
                                </child>
                                <child>
                                  <object class="AdwActionRow" id="category_projects">
                                    <property name="title">Projects</property>
                                    <property name="subtitle">Active work items</property>
                                    <property name="activatable">true</property>
                                    <child type="prefix">
                                      <object class="GtkImage">
                                        <property name="icon-name">folder-symbolic</property>
                                      </object>
                                    </child>
                                    <child type="suffix">
                                      <object class="GtkLabel">
                                        <property name="label">5</property>
                                        <style>
                                          <class name="dim-label"/>
                                          <class name="numeric"/>
                                        </style>
                                      </object>
                                    </child>
                                  </object>
                                </child>
                                <child>
                                  <object class="AdwActionRow" id="category_favorites">
                                    <property name="title">Favorites</property>
                                    <property name="subtitle">Bookmarked items</property>
                                    <property name="activatable">true</property>
                                    <child type="prefix">
                                      <object class="GtkImage">
                                        <property name="icon-name">starred-symbolic</property>
                                      </object>
                                    </child>
                                    <child type="suffix">
                                      <object class="GtkLabel">
                                        <property name="label">8</property>
                                        <style>
                                          <class name="dim-label"/>
                                          <class name="numeric"/>
                                        </style>
                                      </object>
                                    </child>
                                  </object>
                                </child>
                              </object>
                            </child>
                            
                            <!-- Recent Files Section -->
                            <child>
                              <object class="AdwPreferencesGroup">
                                <property name="title">Recent Files</property>
                                <child>
                                  <object class="AdwActionRow" id="recent_file_1">
                                    <property name="title">README.md</property>
                                    <property name="subtitle">2 hours ago</property>
                                    <property name="activatable">true</property>
                                    <child type="prefix">
                                      <object class="GtkImage">
                                        <property name="icon-name">text-x-generic-symbolic</property>
                                      </object>
                                    </child>
                                  </object>
                                </child>
                                <child>
                                  <object class="AdwActionRow" id="recent_file_2">
                                    <property name="title">project-notes.txt</property>
                                    <property name="subtitle">Yesterday</property>
                                    <property name="activatable">true</property>
                                    <child type="prefix">
                                      <object class="GtkImage">
                                        <property name="icon-name">text-x-generic-symbolic</property>
                                      </object>
                                    </child>
                                  </object>
                                </child>
                                <child>
                                  <object class="AdwActionRow" id="recent_file_3">
                                    <property name="title">meeting-agenda.md</property>
                                    <property name="subtitle">3 days ago</property>
                                    <property name="activatable">true</property>
                                    <child type="prefix">
                                      <object class="GtkImage">
                                        <property name="icon-name">text-x-generic-symbolic</property>
                                      </object>
                                    </child>
                                  </object>
                                </child>
                              </object>
                            </child>
                            
                            <!-- Quick Actions -->
                            <child>
                              <object class="AdwPreferencesGroup">
                                <property name="title">Quick Actions</property>
                                <child>
                                  <object class="GtkBox">
                                    <property name="orientation">horizontal</property>
                                    <property name="spacing">6</property>
                                    <property name="homogeneous">true</property>
                                    <child>
                                      <object class="GtkButton" id="new_document_btn">
                                        <property name="label">New</property>
                                        <property name="icon-name">document-new-symbolic</property>
                                        <style>
                                          <class name="suggested-action"/>
                                        </style>
                                      </object>
                                    </child>
                                    <child>
                                      <object class="GtkButton" id="open_document_btn">
                                        <property name="label">Open</property>
                                        <property name="icon-name">document-open-symbolic</property>
                                      </object>
                                    </child>
                                  </object>
                                </child>
                              </object>
                            </child>
                            
                          </object>
                        </child>
                      </object>
                    </child>
                  </object>
                </property>
              </object>
            </property>
          </object>
        </property>

        <property name="content">
          <object class="AdwNavigationPage">
            <property name="title" translatable="yes">Editor</property>
            <property name="tag">content</property>
            <property name="child">
              <object class="AdwToolbarView">
                <property name="top-bar-style">flat</property>
                <child type="top">
                  <object class="AdwHeaderBar" id="main_header">
                    <property name="title-widget">
                      <object class="AdwWindowTitle" id="main_title">
                        <property name="title">Untitled Document</property>
                        <property name="subtitle">Ready to edit</property>
                      </object>
                    </property>
                    <style><class name="flat"/></style>
                    <child type="start">
                      <object class="GtkBox">
                        <property name="spacing">6</property>
                        <child>
                          <object class="GtkButton" id="show_sidebar_button">
                            <property name="icon-name">sidebar-show-symbolic</property>
                            <property name="tooltip-text">Show Sidebar</property>
                            <property name="visible">False</property>
                            <style>
                              <class name="flat"/>
                            </style>
                          </object>
                        </child>
                        <child>
                          <object class="GtkSeparator">
                            <property name="orientation">vertical</property>
                            <property name="margin-top">6</property>
                            <property name="margin-bottom">6</property>
                          </object>
                        </child>
                        <child>
                          <object class="GtkButton" id="save_button">
                            <property name="icon-name">document-save-symbolic</property>
                            <property name="tooltip-text">Save Document</property>
                            <style>
                              <class name="flat"/>
                            </style>
                          </object>
                        </child>
                        <child>
                          <object class="GtkButton" id="format_button">
                            <property name="icon-name">format-text-bold-symbolic</property>
                            <property name="tooltip-text">Format Text</property>
                            <style>
                              <class name="flat"/>
                            </style>
                          </object>
                        </child>
                      </object>
                    </child>
                    <child type="end">
                      <object class="GtkBox">
                        <property name="spacing">6</property>
                        <child>
                          <object class="GtkButton" id="view_mode_button">
                            <property name="icon-name">view-dual-symbolic</property>
                            <property name="tooltip-text">Toggle View Mode</property>
                            <style>
                              <class name="flat"/>
                            </style>
                          </object>
                        </child>
                        <child>
                          <object class="GtkMenuButton" id="main_menu_button">
                            <property name="icon-name">open-menu-symbolic</property>
                            <property name="tooltip-text">Main Menu</property>
                            <style>
                              <class name="flat"/>
                            </style>
                          </object>
                        </child>
                      </object>
                    </child>
                  </object>
                </child>
                
                <!-- Optional bottom toolbar for mobile -->
                <child type="bottom">
                  <object class="GtkActionBar" id="bottom_toolbar">
                    <property name="visible">false</property>
                    <child type="start">
                      <object class="GtkButton">
                        <property name="icon-name">edit-undo-symbolic</property>
                        <property name="tooltip-text">Undo</property>
                      </object>
                    </child>
                    <child type="start">
                      <object class="GtkButton">
                        <property name="icon-name">edit-redo-symbolic</property>
                        <property name="tooltip-text">Redo</property>
                      </object>
                    </child>
                    <child type="end">
                      <object class="GtkButton">
                        <property name="icon-name">document-save-symbolic</property>
                        <property name="tooltip-text">Save</property>
                      </object>
                    </child>
                  </object>
                </child>
                
                <property name="content">
                  <object class="AdwClamp">
                    <property name="maximum-size">1200</property>
                    <property name="tightening-threshold">400</property>
                    <child>
                      <object class="GtkBox" id="main_box">
                        <property name="orientation">vertical</property>
                        <property name="spacing">0</property>
                        <property name="hexpand">true</property>
                        <property name="vexpand">true</property>
                        <property name="margin-start">12</property>
                        <property name="margin-end">12</property>
                        <property name="margin-top">12</property>
                        <property name="margin-bottom">12</property>
                        
                        <!-- Status bar -->
                        <child>
                          <object class="GtkBox" id="status_box">
                            <property name="orientation">horizontal</property>
                            <property name="spacing">12</property>
                            <property name="margin-bottom">12</property>
                            <child>
                              <object class="GtkLabel" id="status_label">
                                <property name="label">Ready</property>
                                <property name="hexpand">true</property>
                                <property name="xalign">0</property>
                                <style>
                                  <class name="dim-label"/>
                                </style>
                              </object>
                            </child>
                            <child>
                              <object class="GtkLabel" id="word_count_label">
                                <property name="label">0 words</property>
                                <style>
                                  <class name="dim-label"/>
                                  <class name="numeric"/>
                                </style>
                              </object>
                            </child>
                          </object>
                        </child>
                        
                        <!-- Main content area with rounded corners -->
                        <child>
                          <object class="AdwBin">
                            <property name="child">
                              <object class="GtkScrolledWindow" id="text_scroll">
                                <property name="hscrollbar-policy">automatic</property>
                                <property name="vscrollbar-policy">automatic</property>
                                <property name="hexpand">true</property>
                                <property name="vexpand">true</property>
                                <property name="has-frame">true</property>
                                <child>
                                  <object class="GtkTextView" id="text_view">
                                    <property name="hexpand">true</property>
                                    <property name="vexpand">true</property>
                                    <property name="monospace">true</property>
                                    <property name="wrap-mode">word</property>
                                    <property name="left-margin">16</property>
                                    <property name="right-margin">16</property>
                                    <property name="top-margin">16</property>
                                    <property name="bottom-margin">16</property>
                                    <property name="buffer">
                                      <object class="GtkTextBuffer" id="text_buffer">
                                        <property name="text"># Welcome to Adaptive Editor

This is a responsive text editor built with GTK4 and Libadwaita. 

## Features

- **Responsive Design**: The interface adapts to different screen sizes
- **Sidebar Navigation**: Easy access to documents and categories  
- **Modern UI**: Uses Libadwaita design patterns
- **Cross-platform**: Works on desktop, mobile, and tablet devices

## Try It Out

Resize the window to see how the interface adapts. On smaller screens, the sidebar automatically collapses and can be toggled using the menu button.

Start typing here to see the word counter update in real-time!</property>
                                      </object>
                                    </property>
                                  </object>
                                </child>
                              </object>
                            </property>
                            <style>
                              <class name="card"/>
                            </style>
                          </object>
                        </child>
                        
                      </object>
                    </child>
                  </object>
                </property>
              </object>
            </property>
          </object>
        </property>

      </object>
    </property>
  </object>
</interface>